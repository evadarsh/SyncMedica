<!DOCTYPE html>
<html>
<head>
    <title>User List</title>
    <style>
        #overlay {
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background-color: transparent; /* semi-transparent white */
           display: none;
           backdrop-filter: blur(10px); /* Adjust the blur effect as needed */
           z-index: 1000; /* Ensure it's above other elements on the page */
       }
       #css3-spinner-svg-pulse-wrapper {
           position: absolute;
           overflow: hidden;
           width: 260px;
           height: 210px;
           top: 50%;
           left: 50%;
           margin-top: -105px;
           margin-left: -130px;
           background-color: transparent;
           animation: none;
           -webkit-animation: none;
           z-index: 1001; /* Ensure it's above the overlay */

       }

       #css3-spinner-svg-pulse {
           position: absolute;
           top: 50%;
           left: 50%;
           margin-top: -105px;
           margin-left: -275px;
       }

       #css3-spinner-pulse {
           stroke-dasharray: 281;
           -webkit-animation: dash 5s infinite linear forwards;
       }

       /*Animation*/
       @-webkit-keyframes dash {
           from {
               stroke-dashoffset: 814;
           }

           to {
               stroke-dashoffset: -814;
           }
       }

       @keyframes dash {
           from {
               stroke-dashoffset: 814;
           }

           to {
               stroke-dashoffset: -814;
           }
       }
   </style>
</head>
<body>
    <div id="overlay"></div>
    <div id='css3-spinner-svg-pulse-wrapper'>
        <svg id='css3-spinner-svg-pulse' version='1.2' height='210' width='550' xmlns='http://www.w3.org/2000/svg'
            viewport='0 0 60 60' xmlns:xlink='http://www.w3.org/1999/xlink'>
            <path id='css3-spinner-pulse' stroke='#DE6262' fill='none' stroke-width='2' stroke-linejoin='round'
                d='M0,90L250,90Q257,60 262,87T267,95 270,88 273,92t6,35 7,-60T290,127 297,107s2,-11 10,-10 1,1 8,-10T319,95c6,4 8,-6 10,-17s2,10 9,11h210' />
        </svg>
    </div>
    <h1 style="text-align: center;">Patient List</h1>
    <div align="center">
    <input  type="text" name="txt_patientid" id="txt_patientid" value="sm-" onkeyup="searchPatient()">
    </div>
    <br>
    <br>
    <div id="result">
        <table border="1" align="center">
            <tr>
                <th>Patient ID</th>
                <th>Name</th>
                <th>Action</th>
            </tr>
            {% for i in users %}
                <tr>
                    <td>{{ i.userdata.patient_id }}</td>
                    <td>{{ i.userdata.user_name }}</td>
                    <td><a href="{% url 'webpharmacy:checkstatus' i.id %}">View Prescriptions</a></td>
                </tr>
            {% endfor %}
        </table>
    </div>
</body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    $("#overlay").hide();
     $("#css3-spinner-svg-pulse-wrapper").hide();
    function searchPatient() {
        var pid = document.getElementById("txt_patientid").value
        var ur = "{% url 'webpharmacy:ajaxsearch_patient' %}"
        $("#overlay").show();
        $("#css3-spinner-svg-pulse-wrapper").show();
        $.ajax({
            url: ur,
            data: { pid: pid, },
            success: function (data) {
                $("#overlay").hide();
                $("#css3-spinner-svg-pulse-wrapper").hide();
                $("#result").html(data);
            },
        });
    }
</script>